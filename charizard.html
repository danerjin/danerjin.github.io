<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset = 'utf-8'>
    <title>charizard battle</title>
    <link rel = 'shortcut icon' type = 'image.gif' href = 'sprites/mega%20charizard%20x.gif'></link>
    <style>
    @keyframes pikaLand{
      0%{left:400px;}
      100%{left:-25px;}
    }
    @keyframes pika{
      0%{left:435px;}
      100%{left:10px;}
    }
    @keyframes charizardLand{
      0%{left:450px;}
      100%{left:900px;}
    }
    @keyframes charizard{
      0%{left:500px;}
      100%{left:950px;}
    }
    #myHealthBar{
      position:absolute;
      left:70px;
      top:340px;
      border: 5px ridge;
      background-color: yellow;
    }
    #opponentHealthBar{
      position:absolute;
      left:1000px;
      top:300px;
      border: 5px ridge;
      background-color: red;
    }
    #return{
      position: absolute;
      top: 425px;
      left:500px;
    }
    #opponentMove{
      position:absolute;
      left:20px;
      top:300px;
      z-index: 1;
    }
    #myMove{
      position:absolute;
      left:1025px;
      top:0px;
      z-index: 3;
    }
    #charizard{
      position: absolute;
      left:950px;
      top:0px;
      z-index: 2;
      animation-name: charizard;
      animation-duration: 3s;
    }
    #pikachu{
      position: absolute;
      left:10px;
      top:400px;
      z-index: 2;
      animation-name: pika;
      animation-duration: 3s;
    }
    #PikaLandSvg{
      z-index:1;
      position: absolute;
      left:-25px;
      top:450px;
      animation-name: pikaLand;
      animation-duration: 3s;
    }
    #CharizardLandSvg{
      z-index:1;
      position: absolute;
      left:900px;
      top:150px;
      animation-name: charizardLand;
      animation-duration: 3s;
    }
    #electro-ball{
      position: absolute;
      left:200px;
      top:350px;
      z-index: 0;
    }
    #volt-tackle{
      position: absolute;
      left:200px;
      top:400px;
      z-index: 0;
    }
    #thunder-bolt{
      position: absolute;
      left:300px;
      top:400px;
      z-index: 0;
    }
    #Gigavolt-havoc{
      position: absolute;
      left:300px;
      top:350px;
      z-index: 0;
    }
    .flame{
      transform: rotate(250deg);
      position:absolute;
      top:250px;
      left:150px;
    }
    #typewriter{
      color: white;
      font-family: monospace;
      background-color: red;
      border: 10px solid black;
      width:100%;
      height:50px;
      position:absolute;
      top:520px;
    }
    button {
      padding:10px;
      display: inline-block;
      cursor: pointer;
      text-align: center;
      text-decoration: none;
      outline: none;
      color: #fff;
      background-color: #4CAF50;
      border: none;
      border-radius: 15px;
      box-shadow: 0 5px #999;
      transition-duration: 0.4s;
    }

    button:hover {
      background-color: #f44336;
    }

    button:active {
      background-color: #3e8e41;
      box-shadow: 0 2px #666;
      transform: translateY(4px);
    }
    </style>
  </head>
  <body onload="startTheGame()">
    <div id ='myHealthBar'>pikachu<br><div id = 'myHealthText'>300/300</div></div>
    <div id ='opponentHealthBar'>charizard<br><div id = 'opponentHealthText'>400/400</div></div>
    <svg id="PikaLandSvg" width="264px" height="77px">
        <ellipse cx="135" cy="50" rx="100" ry="25"
                 style="stroke:#c18605;
                           stroke-width:6px;
                           fill:#ffbf0f;"></ellipse>
    </svg>
    <svg id="CharizardLandSvg" width="264px" height="77px">
        <ellipse cx="135" cy="50" rx="100" ry="25"
                 style="stroke:#c18605;
                           stroke-width:6px;
                           fill:#ffbf0f;"></ellipse>
    </svg>
    <img id = 'charizard' src = 'sprites/Charizard.gif' width = '200' alt = 'charizard'>
    <img id = 'pikachu' src = 'sprites/pikachu.gif' width = '200' alt = 'pikachu'>
    <img id = 'opponentMove' src = '' width = '200'>
    <img class = 'flame' src = 'sprites/flamethrower.gif'>
    <img id = 'myMove' src = '' width = '200'>
    <div id = 'moves'>
    <button id = 'electro-ball' onclick = 'electroBall()'>electro ball</button>
    <button id = 'volt-tackle' onclick="voltTackle()">volt tackle</button>
    <button id = 'thunder-bolt' onclick="thunderbolt()">thunderbolt</button>
    <button id = 'Gigavolt-havoc' onclick="gigavoltHavoc()">Gigavolt Havoc</button>
    </div>
    <!--<a id = 'return' href='forest.htm'>go back to main route</a>-->
    <div id = 'typewriter'></div>
    <script src = 'jquery.js'></script>
    <script>
    $(".flame").hide();
    var opponentHealth = 400;
    var myHealth = 300;
    var megaEvolve;
    var isMegaEvolved = false;
    var isTyping = false;
    var meAttacking = false;
    var opponentAttacking = false;
    var type = function(typo){
      isTyping = true;
      opponentAttacking = false;
      meAttacking = false;
      $("#typewriter").text('')
      $("button").hide()
      for(let i = 0;i <= typo.length;i++){
        setTimeout(function(){
          $("#typewriter").append(typo[i])
          if(i === typo.length){
            isTyping = false;
            $("button").show();
          }
        },100 * i)
      }
      if(!meAttacking && !isTyping){
        opponentAttacking = true;
        opponentMove();
      }
    }
    setTimeout(function(){
    type('get ready for battle!')
    },3000)
      startTheGame = function(){
      $('#return').hide();
      $('#pikachu').hide();
      $('#pikachu').fadeIn(1000);
      $('#charizard').hide();
      $('#charizard').fadeIn(1000);
    };
      thunderbolt = function(){
        opponentAttacking = false;
        $('#myMove').fadeIn();
        $('#myMove').attr('src','sprites/lightning.gif');
        $('#myMove').fadeOut(1000);
        isTyping = true;
        type('you used thunderbolt')
        meAttacking = true;
        opponentHealth-=10;
        $('#myHealthText').text(myHealth + '/300');
        $('#opponentHealthText').text(opponentHealth + '/400');
        if(!isMegaEvolved && opponentHealth <= 100){
              megaEvolve();
            }
     };
            var megaEvolve = function(){
              var r = Math.random();
              var ra = r*3;
              if(ra <= 1.5){
              $('#charizard').attr('src','sprites/mega%20charizard%20y.gif');
              $('#charizard').attr('width',300)
              $('#myHealthText').text(myHealth + '/300');
              $('#opponentHealthText').text(opponentHealth + '/400');
            }
            else{
            $('#charizard').attr('src','sprites/mega%20charizard%20x.gif')
            $('#charizard').attr('width',250)
            $('#myHealthText').text(myHealth + '/300');
            $('#opponentHealthText').text(opponentHealth + '/400');
          }
            isMegaEvolved = true;
            opponentHealth = 400;
            $('#myHealthText').text(myHealth + '/300');
            $('#opponentHealthText').text(opponentHealth + '/400');
              setTimeout(function(){
              type('charizard mega evolved!')
            },5000)
          };
              var OpponentMove = function(){
                var moves = ['wildfire', 'flamethrower', 'fire punch', 'seismic toss'];
                var randomNumber = Math.floor(Math.random()*moves.length);
                if(randomNumber === 0){
                  $(".flame").hide();
                  $("#opponentMove").show();
                  $('#opponentMove').attr('src', 'sprites/wildfire.gif');
                //myHealth-=20;
              }
                else{
                  $(".flame").show();
                  $("#opponentMove").hide();
                  //myHealth-=10;
          };
              if(myHealth<=0){
                $("body").append('<h1>you lost</h1>')
                $("button").hide();
                $("#return").show();
              }
              if(opponentHealth<=0){
                $("body").append('<h1>you won!!!!!!!!</h1>')
                $("button").hide();
                $("#return").show();
              }
              $('#myHealthText').text(myHealth + '/300');
              $('#opponentHealthText').text(opponentHealth + '/400');
            }
        </script>
      </body>
      </html>
